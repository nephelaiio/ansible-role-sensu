---
galaxy_info:
  author: Ted Cook
  description: An Ansible role to install and configure sensu
  license: MIT
  min_ansible_version: 2.2
  platforms:
    - name: EL
      versions:
        - 7
    - name: Archlinux
      versions:
        - all
    - name: Ubuntu
      versions:
        - xenial
    - name: Debian
      versions:
        - stretch
  galaxy_tags:
    - sensu

dependencies:
  - role: nephelaiio.rabbitmq
    version: 1.0.2
    vars:
      rabbitmq_vhost: "{{ sensu_rabbitmq_vhost }}"
      rabbitmq_user_name: "{{ sensu_rabbitmq_user_name }}"
      rabbitmq_user_pass: "{{ sensu_rabbitmq_user_pass }}"
    when: sensu_master
  - role: geerlingguy.redis
    version: 1.5.1
    when: sensu_master
  - role: franklinkim.users
    version: 1.8.0
    vars:
      users:
        - username: "{{ sensu_user_name }}"
          home: "{{ sensu_user_home }}"
          append: no
          groups:
            - "{{ sensu_user_group }}"
          system: yes
  - role: nephelaiio.rbenv
    vars:
      rbenv_user: "{{ sensu_user_name }}"
      rbenv_gems: "{{ sensu_gems }}"
      rbenv_ruby: "{{ sensu_ruby }}"
    version: 1.0.3
  - role: tumf.systemd-service
    vars:
      systemd_service_name: "{{ sensu-client }}"
      systemd_service_Unit_Description: "Sensu Client"
    version: 1.9
  - role: tumf.systemd-service
    vars:
      systemd_service_name: "{{ sensu-server }}"
      systemd_service_Unit_Description: "Sensu Server"
    version: 1.9
  - role: tumf.systemd-service
    vars:
      systemd_service_name: "{{ sensu-api }}"
      systemd_service_Unit_Description: "Sensu API"
    version: 1.9
