---
galaxy_info:
  author: Ted Cook
  description: An Ansible role to install and configure sensu
  license: MIT
  min_ansible_version: 2.2
  platforms:
    - name: EL
      versions:
        - 7
    - name: Archlinux
      versions:
        - all
    - name: Ubuntu
      versions:
        - xenial
    - name: Debian
      versions:
        - stretch
  galaxy_tags:
    - sensu

dependencies:
  - role: nephelaiio.rabbitmq
    version: 1.0.2
    vars:
      rabbitmq_vhost: "{{ sensu_rabbitmq_vhost }}"
      rabbitmq_user_name: "{{ sensu_rabbitmq_user_name }}"
      rabbitmq_user_pass: "{{ sensu_rabbitmq_user_pass }}"
    when:
      - sensu_rabbitmq
      - sensu_server
  - role: geerlingguy.redis
    vars:
      redis_bind_interface: "{{ sensu_redis_host }}"
      redis_port: "{{ sensu_redis_port }}"
    version: 1.5.1
    when:
      - sensu_redis
      - sensu_server
  - role: franklinkim.users
    version: 1.8.0
    become: yes
    vars:
      users:
        - username: "{{ sensu_user_name }}"
          home: "{{ sensu_user_home }}"
          append: no
          groups:
            - "{{ sensu_user_group }}"
          system: yes
  - role: nephelaiio.rbenv
    version: 1.0.9
    vars:
      rbenv_user: "{{ sensu_user_name }}"
      rbenv_gems: "{{ sensu_gems }}"
      rbenv_ruby: "{{ sensu_ruby_version }}"
      rbenv_ruby_path: "{{ sensu_ruby_path }}"
